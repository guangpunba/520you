define(["jquery","layer"],function(t,i){var n=function(n,o,e){t.ajax({url:n,method:"POST",data:o,success:function(n){var o=n.info;if(0==n.status){var a=o.field,s=o.tipsinfo;t(".form_tips").remove(),t("#"+a).focus(),t("#"+a).after("<div class='form_tips am-text-sm am-text-danger'>"+s+"</div>"),setTimeout(function(){e.button("reset")},1e3)}else t(".form_tips").remove(),i.msg(o,{icon:1,time:2e3},function(){location.href=_APP+"/Admins/index"})}})},o=function(){t("#submitAdd").removeClass("am-disabled").on("click",function(i){i.preventDefault();var o=t(this),e=t("#form").serialize();o.button("loading"),n(_APP+"/Admins/addAccount",e,o)})},e=function(){t("#submitEdit").removeClass("am-disabled").on("click",function(i){i.preventDefault();var o=t(this),e={username:t.trim(t("#username").val()),password:t.trim(t("#pwd").val()),repassword:t.trim(t("#repwd").val()),id:t.trim(t("#getid").val()),groupid:t.trim(t("#group").val())};o.button("loading"),n(_APP+"/Admins/editAccount",e,o)})},a=function(){t(".delbtn").on("click",function(){var n=t(this).parents("tr").attr("data-id");i.confirm("确定要删除这个账号吗？",{title:!1,btn:["确定","取消"]},function(){t.post(_APP+"/Admins/delAccount",{id:n},function(t){1==t.status?i.msg(t.info,{icon:1,time:2e3},function(){location.href=location.href}):i.msg(t.info,{icon:2,time:2e3},function(){location.href=location.href})})},function(){i.closeAll()})})};o(),e(),a()});