(function(e){e.fn.drag=function(t){function l(){o.removeClass("handler_bg").addClass("handler_ok_bg").attr("data-check","ok"),a.text("验证通过"),r.css({color:"#fff"}),o.unbind("mousedown"),e(document).unbind("mousemove"),e(document).unbind("mouseup")}function c(){o.removeClass("handler_ok_bg").addClass("handler_bg").attr("data-check","fail"),a.text("拖动滑块验证"),r.css("color","#333"),o.css({left:0}),u.css({width:0})}var n,r=this,i=!1,s={},t=e.extend(s,t),o=r.find(".handler"),u=r.find(".drag_bg"),a=r.find(".drag_text"),f=r.width()-o.width();t.reset==1&&c(),o.mousedown(function(e){i=!0,n=e.pageX-parseInt(o.css("left"),10)}),e(document).mousemove(function(e){var t=e.pageX-n;i&&(t>0&&t<=f?(o.css({left:t}),u.css({width:t})):t>f&&l())}).mouseup(function(e){i=!1;var t=e.pageX-n;t<f&&(o.css({left:0}),u.css({width:0}))})}})(jQuery);