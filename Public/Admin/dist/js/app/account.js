define(["layer"],function(e){e.config({path:jsUrl+"/libs/layer/"});var t=function(t,n,r){$.ajax({url:t,method:"POST",data:n,success:function(t){var n=t.info;if(t.status==0){var i=n.field,s=n.tipsinfo;$(".form_tips").remove(),$("#"+i+"").focus(),$("#"+i+"").after("<div class='form_tips am-text-sm am-text-danger'>"+s+"</div>"),setTimeout(function(){r.button("reset")},1e3)}else $(".form_tips").remove(),e.msg(n,{icon:1,time:2e3},function(){location.href=_APP+"/Admins/index"})}})},n=function(){$("#submitAdd").removeClass("am-disabled").on("click",function(e){e.preventDefault();var n=$(this),r=$("#form").serialize();n.button("loading"),t(_APP+"/Admins/addAccount",r,n)})},r=function(){$("#submitEdit").removeClass("am-disabled").on("click",function(e){e.preventDefault();var n=$(this),r={username:$.trim($("#username").val()),password:$.trim($("#pwd").val()),repassword:$.trim($("#repwd").val()),id:$.trim($("#getid").val()),groupid:$.trim($("#group").val())};n.button("loading"),t(_APP+"/Admins/editAccount",r,n)})},i=function(){$(".delbtn").on("click",function(){var t=$(this).parents("tr").attr("data-id");e.confirm("确定要删除这个账号吗？",{title:!1,btn:["确定","取消"]},function(){$.post(_APP+"/Admins/delAccount",{id:t},function(t){t.status==1?e.msg(t.info,{icon:1,time:2e3},function(){location.href=location.href}):e.msg(t.info,{icon:2,time:2e3},function(){location.href=location.href})})},function(){e.closeAll()})})};n(),r(),i()});