define(["layer"],function(t){var i=function(i,n,o){$.ajax({url:i,method:"POST",data:n,success:function(i){var n=i.info;if(0==i.status){var e=n.field,a=n.tipsinfo;$(".form_tips").remove(),$("#"+e).focus(),$("#"+e).after("<div class='form_tips am-text-sm am-text-danger'>"+a+"</div>"),setTimeout(function(){o.button("reset")},1e3)}else $(".form_tips").remove(),t.msg(n,{icon:1,time:2e3},function(){location.href=_APP+"/Admins/index"})}})},n=function(){$("#submitAdd").removeClass("am-disabled").on("click",function(t){t.preventDefault();var n=$(this),o=$("#form").serialize();n.button("loading"),i(_APP+"/Admins/addAccount",o,n)})},o=function(){$("#submitEdit").removeClass("am-disabled").on("click",function(t){t.preventDefault();var n=$(this),o={username:$.trim($("#username").val()),password:$.trim($("#pwd").val()),repassword:$.trim($("#repwd").val()),id:$.trim($("#getid").val()),groupid:$.trim($("#group").val())};n.button("loading"),i(_APP+"/Admins/editAccount",o,n)})},e=function(){$(".delbtn").on("click",function(){var i=$(this).parents("tr").attr("data-id");t.confirm("确定要删除这个账号吗？",{title:!1,btn:["确定","取消"]},function(){$.post(_APP+"/Admins/delAccount",{id:i},function(i){1==i.status?t.msg(i.info,{icon:1,time:2e3},function(){location.href=location.href}):t.msg(i.info,{icon:2,time:2e3},function(){location.href=location.href})})},function(){t.closeAll()})})};n(),o(),e()});