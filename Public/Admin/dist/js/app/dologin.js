define(["layer","cookie","base64"],function(e){e.config({path:jsUrl+"/libs/layer/"}),$("#submit_login").on("click",function(t){t.preventDefault();var n=$.trim($("#username").val()),r=$.trim($("#password").val()),i={username:n,psw:r},s=$("#drag"),o=s.find(".handler").attr("data-check");if(o!="ok"){e.alert("请滑动验证码进行验证",{icon:2,btn:!1,title:!1});return}if(n==""){e.alert("请填写用户名",{icon:2,btn:!1,title:!1});return}if(r==""){e.alert("请填写密码",{icon:1,btn:!1,title:!1});return}$.post(_APP+"/Login/dologin",i,function(t){if(t.status==1){if($("#remember-me").is(":checked")){var i=new Base64;$.cookie("username",n,{path:"/",expires:7}),$.cookie("psw",i.encode(r),{path:"/",expires:7})}else $.cookie("username",null,{path:"/"}),$.cookie("psw",null,{path:"/"});setTimeout(function(){location.href=_APP+"/Index/index"},100)}else t.status==2?(e.alert(t.info,{icon:2,btn:!1,title:!1}),$("#drag").drag({reset:!0})):e.alert(t.info,{icon:2,btn:!1,title:!1})})}),$(document).on("keyup",function(e){e.keyCode==13&&$("#submit_login").trigger("click")})});