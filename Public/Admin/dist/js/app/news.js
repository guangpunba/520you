define(["layer"],function(t){t.config({path:jsUrl+"/libs/layer/"});var i=function(i,e,n){$.ajax({url:i,method:"POST",data:e,success:function(i){var e=i.info;if(0==i.status){var o=e.field,a=e.tipsinfo;$(".form_tips").remove(),$("#"+o).focus(),$("#"+o).after("<div class='form_tips am-text-sm am-text-danger'>"+a+"</div>"),setTimeout(function(){n.button("reset")},1e3)}else $(".form_tips").remove(),t.msg(e,{icon:1,time:2e3},function(){location.href=_APP+"/News/index"})}})},e=function(){$("#submitAdd").removeClass("am-disabled").on("click",function(t){t.preventDefault();var e=$(this),n=$("#form").serialize();e.button("loading"),i(_APP+"/News/addNew",n,e)})},n=function(){$("#submitEdit").removeClass("am-disabled").on("click",function(t){t.preventDefault();var e=$(this),n=$("#form").serializeArray(),o=$("#getid").val();e.button("loading"),n.push({name:"id",value:o}),i(_APP+"/News/editNews",n,e)})},o=function(){$(document).on("click",".delbtn",function(){var i=$(this).parents("tr").attr("data-id");t.confirm("确定要删除这条新闻吗？",{title:!1,btn:["确定","取消"]},function(){$.post(_APP+"/News/delNew",{id:i},function(i){1==i.status?t.msg(i.info,{icon:1,time:2e3},function(){location.href=location.href}):t.msg(i.info,{icon:2,time:2e3},function(){location.href=location.href})})},function(){t.closeAll()})})};o(),n(),e()});